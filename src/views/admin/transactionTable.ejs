<% if (transactions && transactions.length > 0) { %>
    <% transactions.forEach(function(transaction) { %>
        <tr>
            <td><%= new Date(transaction.updated_at).toLocaleString('th-TH', { timeZone: 'Asia/Bangkok' }) %></td>
            <td><strong><%= transaction.user_full_name %></strong></td>
            <td><strong><%= transaction.recipient_name %></strong></td>
            <td><strong><%= transaction.recipient_mobile %></strong></td>
            <td><%= transaction.channel %></td>
            <td><strong>‡∏ø <%= transaction.amount %></strong></td>
            <td>
                <% 
                let statusText = '‚è≥ ‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£';
                if (transaction.status === 'completed') { 
                    statusText = '‚úÖ ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß';
                } else if (transaction.status === 'canceled') { 
                    statusText = '‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß';
                } else if (transaction.status === 'expired') { 
                    statusText = '‚õî ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß';
                }
                %>
                <span class="status-badge status-<%= transaction.status %>">
                    <%= statusText %>
                </span>
            </td>
            <td>
                <div class="action-buttons">
                    <% if (transaction.status === 'pending') { %>
                        <button class="btn btn-success" onclick="showConfirmModal('<%= transaction.transaction_id %>', '<%= transaction.amount %>', '<%= transaction.recipient_name %>', '<%= transaction.user_id %>', '<%= transaction.package_id %>', 'approve')">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
                        <button class="btn btn-danger" onclick="showConfirmModal('<%= transaction.transaction_id %>', '<%= transaction.amount %>', '<%= transaction.recipient_name %>', '<%= transaction.user_id %>', '<%= transaction.package_id %>', 'reject')">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <% } else { %>
                        <span class="status-bg">‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß</span>
                    <% } %>
                </div>
            </td>
        </tr> 
    <% }); %>
<% } else { %>
        <tr>
            <td colspan="6" class="empty-state">
                <div class="empty-state-icon">üìä</div>
                <div>‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ò‡∏∏‡∏£‡∏Å‡∏£‡∏£‡∏°</div>
            </td>
        </tr>
<% } %>